# --- GitHub Actions Workflow for Pylint using Poetry ---
name: Pylint

on: [push, pull_request]

jobs:
    lint:
        runs-on: ubuntu-latest
        strategy:
            matrix:
                python-version: ['3.13']
        steps:
            - uses: actions/checkout@v4
            - name: Set up Python ${{ matrix.python-version }}
              uses: actions/setup-python@v5
              with:
                  python-version: ${{ matrix.python-version }}

            - name: Install Poetry
              run: |
                  pip install poetry

            - name: Configure Poetry and Install Dependencies
              # Configures Poetry to create the virtual environment in the project directory
              # and installs project dependencies (including Pylint, if it's in your dev dependencies)
              run: |
                  poetry config virtualenvs.in-project true
                  poetry install --no-root --only dev # Ensure dev dependencies (like pylint) are installed

            - name: Run Pylint with .pylintrc configuration
              # CRUCIAL STEP: Use 'poetry run' to execute pylint inside the virtual environment.
              # This ensures Pylint can find all packages installed via poetry.
              run: |
                  poetry run pylint --rcfile=./.pylintrc $(find . -name "*.py" | tr '\n' ' ')
              # The command:
              # 1. `poetry run pylint`: Executes Pylint within the environment created by Poetry.
              # 2. `--rcfile=./.pylintrc`: Uses the custom configuration file (your Canvas content).
              # 3. `$(find . -name "*.py" | tr '\n' ' ')`: Finds all .py files recursively.
